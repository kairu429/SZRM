<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚µã‚¤ã‚¼ãƒªãƒ¤æ³¨æ–‡ã‚¹ãƒ­ãƒƒãƒˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700&display=swap');
        
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #f3f4f6;
        }

        .slot-card {
            background: white;
            border: 8px solid #009241; /* ã‚µã‚¤ã‚¼ãƒªãƒ¤ã‚°ãƒªãƒ¼ãƒ³ */
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .slot-window {
            height: 120px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
            border: 4px inset #eee;
            margin: 10px 0;
        }

        .spinning {
            animation: slot-spin 0.1s linear infinite;
        }

        @keyframes slot-spin {
            0% { transform: translateY(-10px); opacity: 0.5; }
            50% { transform: translateY(10px); opacity: 0.8; }
            100% { transform: translateY(-10px); opacity: 0.5; }
        }

        .saize-red { color: #e4002b; }
        .saize-green { color: #009241; }
        .btn-gradient {
            background: linear-gradient(to bottom, #009241, #007a37);
            transition: transform 0.1s;
        }
        .btn-gradient:active {
            transform: scale(0.95);
        }

        /* å›³é‘‘ãƒ¢ãƒ¼ãƒ€ãƒ«ç”¨ */
        #collection-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 50;
        }
        .modal-content {
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div class="max-w-md w-full text-center">
        <h1 class="text-3xl mb-6 saize-red">
            <span class="bg-white px-4 py-1 rounded-full border-2 border-green-600">ã‚µã‚¤ã‚¼ãƒªãƒ¤ æ³¨æ–‡ã‚¬ãƒãƒ£</span>
        </h1>

        <div class="slot-card p-6 mb-8">
            <div class="text-gray-500 text-sm mb-2" id="category-label">ã‚«ãƒ†ã‚´ãƒª</div>
            
            <div class="slot-window rounded-lg">
                <div id="menu-name" class="text-2xl font-bold px-4">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</div>
            </div>

            <div class="flex justify-between items-center mt-4 px-2">
                <div class="text-lg font-bold saize-green" id="menu-id">â„– ----</div>
                <div class="text-2xl font-bold saize-red" id="menu-price">Â¥ ---</div>
            </div>
        </div>

        <button id="spin-btn" class="btn-gradient text-white text-xl font-bold py-4 px-12 rounded-full shadow-lg w-full mb-4">
            æ³¨æ–‡ã‚’æ±ºã‚ã‚‹ï¼
        </button>

        <p class="text-xs text-gray-400 mt-4">
            â€»ä¾¡æ ¼ã¯ç¨è¾¼ã¿ãƒ»å…¨å›½ç‰ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’åŸºæº–ã¨ã—ã¦ã„ã¾ã™ã€‚<br>
            åœ°åŸŸé™å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯å«ã¾ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
        </p>
    </div>

    <!-- å›³é‘‘è¡¨ç¤ºãƒœã‚¿ãƒ³ -->
    <button id="open-collection" class="fixed bottom-6 right-6 w-16 h-16 bg-white border-4 border-green-600 rounded-full shadow-xl flex items-center justify-center text-3xl hover:bg-green-50 transition-colors z-40">
        ğŸ“–
    </button>

    <!-- å›³é‘‘ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="collection-modal" class="flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-lg rounded-3xl overflow-hidden shadow-2xl flex flex-col">
            <div class="bg-green-600 p-4 flex justify-between items-center">
                <h2 class="text-white text-xl font-bold">ãƒ¡ãƒ‹ãƒ¥ãƒ¼å›³é‘‘</h2>
                <button id="close-modal" class="text-white text-2xl">&times;</button>
            </div>
            <div class="p-4 bg-gray-100 border-b flex justify-between items-center">
                <span id="collection-count" class="text-sm font-bold text-gray-600">é”æˆç‡: 0 / 0 (0%)</span>
                <div class="w-1/2 bg-gray-300 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-green-500 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <div class="modal-content p-4 grid grid-cols-1 gap-2" id="collection-list">
                <!-- ãƒªã‚¹ãƒˆãŒã“ã“ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </div>

    <script>
        const menuData = [
            // ã‚µãƒ©ãƒ€
            { id: "1202", name: "å°ã‚¨ãƒ“ã®ã‚µãƒ©ãƒ€", price: 350, cat: "ã‚µãƒ©ãƒ€" },
            { id: "1205", name: "ã‚ã‹ã‚ã®ã‚µãƒ©ãƒ€", price: 350, cat: "ã‚µãƒ©ãƒ€" },
            { id: "1207", name: "ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ã®ã‚µãƒ©ãƒ€", price: 400, cat: "ã‚µãƒ©ãƒ€" },
            { id: "1208", name: "ã‚°ãƒªãƒ¼ãƒ³ã‚µãƒ©ãƒ€", price: 350, cat: "ã‚µãƒ©ãƒ€" },
            { id: "1209", name: "ãƒã‚­ãƒ³ã®ã‚µãƒ©ãƒ€", price: 350, cat: "ã‚µãƒ©ãƒ€" },
            // ã‚¹ãƒ¼ãƒ—
            { id: "1301", name: "ã‚³ãƒ¼ãƒ³ã‚¯ãƒªãƒ¼ãƒ ã‚¹ãƒ¼ãƒ—", price: 150, cat: "ã‚¹ãƒ¼ãƒ—" },
            { id: "1305", name: "ç”°èˆé¢¨ãƒŸãƒã‚¹ãƒˆãƒ­ãƒ¼ãƒ", price: 300, cat: "ã‚¹ãƒ¼ãƒ—" },
            { id: "1307", name: "ãŸã¾ã­ãã®ã‚ºãƒƒãƒ‘", price: 300, cat: "ã‚¹ãƒ¼ãƒ—" },
            // å‰èœ
            { id: "1401", name: "è¾›å‘³ãƒã‚­ãƒ³", price: 300, cat: "å‰èœ" },
            { id: "1402", name: "ã‚¢ãƒ­ã‚¹ãƒ†ã‚£ãƒãƒ¼ãƒ‹", price: 400, cat: "å‰èœ" },
            { id: "1403", name: "ã»ã†ã‚Œã‚“è‰ã®ã‚½ãƒ†ãƒ¼", price: 200, cat: "å‰èœ" },
            { id: "1404", name: "ãƒãƒƒãƒ—ã‚³ãƒ¼ãƒ³ã‚·ãƒ¥ãƒªãƒ³ãƒ—", price: 300, cat: "å‰èœ" },
            { id: "1405", name: "ã‚¨ã‚¹ã‚«ãƒ«ã‚´ã®ã‚ªãƒ¼ãƒ–ãƒ³ç„¼ã", price: 400, cat: "å‰èœ" },
            { id: "1406", name: "å°ã‚¨ãƒ“ã®ã‚«ã‚«ã‚¯ãƒ†ãƒ«", price: 280, cat: "å‰èœ" },
            { id: "1407", name: "ãƒãƒ§ãƒªã‚½ãƒ¼", price: 400, cat: "å‰èœ" },
            { id: "1413", name: "çˆ½ã‚„ã‹ã«ã‚“ã˜ã‚“ã‚µãƒ©ãƒ€", price: 200, cat: "å‰èœ" },
            { id: "1415", name: "ã‚«ãƒªãƒƒã¨ãƒãƒ†ãƒˆ", price: 250, cat: "å‰èœ" },
            { id: "1422", name: "ãƒãƒ¢ãƒ³ãƒ»ã‚»ãƒ©ãƒ¼ãƒ", price: 320, cat: "å‰èœ" },
            { id: "1425", name: "æŸ”ã‚‰ã‹é’è±†ã®æ¸©ã‚µãƒ©ãƒ€", price: 200, cat: "å‰èœ" },
            // ãƒ¡ã‚¤ãƒ³
            { id: "2101", name: "ãƒŸãƒ©ãƒé¢¨ãƒ‰ãƒªã‚¢", price: 300, cat: "ãƒ‰ãƒªã‚¢" },
            { id: "2103", name: "åŠç†Ÿåµã®ãƒŸãƒ©ãƒé¢¨ãƒ‰ãƒªã‚¢", price: 350, cat: "ãƒ‰ãƒªã‚¢" },
            { id: "2106", name: "ã‚¿ãƒ©ã‚³ã¨ã‚¨ãƒ“ã®ãƒ‰ãƒªã‚¢", price: 400, cat: "ãƒ‰ãƒªã‚¢" },
            { id: "2203", name: "ãƒãƒ«ã‚²ãƒªãƒ¼ã‚¿ãƒ”ã‚¶", price: 400, cat: "ãƒ”ã‚¶" },
            { id: "2206", name: "ãŸã£ã·ã‚Šã‚³ãƒ¼ãƒ³ã®ãƒ”ã‚¶", price: 400, cat: "ãƒ”ã‚¶" },
            { id: "2301", name: "ã‚¿ãƒ©ã‚³ã‚½ãƒ¼ã‚¹ã‚·ã‚·ãƒªãƒ¼é¢¨", price: 400, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2303", name: "ãƒšãƒšãƒ­ãƒ³ãƒãƒ¼ãƒ", price: 300, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2305", name: "ã‚«ãƒ«ãƒœãƒŠãƒ¼ãƒ©", price: 500, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2328", name: "ã‚¤ã‚«ã®å¢¨å…¥ã‚Šã‚»ãƒ”ã‚¢ã‚½ãƒ¼ã‚¹", price: 500, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2402", name: "è‹¥é¶ã®ãƒ‡ã‚£ã‚¢ãƒœãƒ©é¢¨", price: 500, cat: "è‚‰æ–™ç†" },
            { id: "2403", name: "ã‚¤ã‚¿ãƒªã‚¢ãƒ³ãƒãƒ³ãƒãƒ¼ã‚°", price: 500, cat: "è‚‰æ–™ç†" },
            { id: "2418", name: "ãƒŸãƒƒã‚¯ã‚¹ã‚°ãƒªãƒ«", price: 650, cat: "è‚‰æ–™ç†" },
            // ãƒ‡ã‚¶ãƒ¼ãƒˆ
            { id: "3201", name: "ãƒ†ã‚£ãƒ©ãƒŸã‚¹ã‚¯ãƒ©ã‚·ã‚³", price: 300, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3206", name: "ã‚¤ã‚¿ãƒªã‚¢ãƒ³ãƒ—ãƒªãƒ³", price: 250, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3215", name: "ã‚³ãƒ¼ãƒ’ãƒ¼ã‚¼ãƒªãƒ¼ï¼†ã‚¸ã‚§ãƒ©ãƒ¼ãƒˆ", price: 350, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            // ãƒ‰ãƒªãƒ³ã‚¯
            { id: "3301", name: "ç”Ÿãƒ“ãƒ¼ãƒ«ã‚¸ãƒ§ãƒƒã‚­", price: 400, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3401", name: "ã‚°ãƒ©ã‚¹ãƒ¯ã‚¤ãƒ³èµ¤", price: 100, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "5101", name: "ã‚»ãƒƒãƒˆãƒ‰ãƒªãƒ³ã‚¯ãƒãƒ¼", price: 200, cat: "ãƒ‰ãƒªãƒ³ã‚¯ãƒãƒ¼" }
        ];

        // Cookieæ“ä½œãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        const setCookie = (name, value, days) => {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + encodeURIComponent(JSON.stringify(value)) + ";" + expires + ";path=/";
        };

        const getCookie = (name) => {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) {
                    try {
                        return JSON.parse(decodeURIComponent(c.substring(nameEQ.length, c.length)));
                    } catch (e) {
                        return [];
                    }
                }
            }
            return [];
        };

        // åˆæœŸãƒ‡ãƒ¼ã‚¿å–å¾—
        let collectedIds = getCookie('saize_collection');

        const spinBtn = document.getElementById('spin-btn');
        const menuNameDisp = document.getElementById('menu-name');
        const menuIdDisp = document.getElementById('menu-id');
        const menuPriceDisp = document.getElementById('menu-price');
        const catLabel = document.getElementById('category-label');

        const modal = document.getElementById('collection-modal');
        const openModalBtn = document.getElementById('open-collection');
        const closeModalBtn = document.getElementById('close-modal');
        const collectionList = document.getElementById('collection-list');
        const collectionCount = document.getElementById('collection-count');
        const progressBar = document.getElementById('progress-bar');

        let isSpinning = false;

        function getRandomMenu() {
            return menuData[Math.floor(Math.random() * menuData.length)];
        }

        function spin() {
            if (isSpinning) return;
            isSpinning = true;
            
            spinBtn.disabled = true;
            spinBtn.innerText = "æŠ½é¸ä¸­...";
            
            menuNameDisp.classList.add('spinning');
            
            let counter = 0;
            const duration = 20; 
            
            const interval = setInterval(() => {
                const tempMenu = getRandomMenu();
                menuNameDisp.innerText = tempMenu.name;
                menuIdDisp.innerText = "â„– " + tempMenu.id;
                menuPriceDisp.innerText = "Â¥ " + tempMenu.price;
                catLabel.innerText = tempMenu.cat;
                
                counter++;
                if (counter > duration) {
                    clearInterval(interval);
                    stopSpin();
                }
            }, 80);
        }

        function stopSpin() {
            const finalMenu = getRandomMenu();
            
            menuNameDisp.classList.remove('spinning');
            menuNameDisp.innerText = finalMenu.name;
            menuIdDisp.innerText = "â„– " + finalMenu.id;
            menuPriceDisp.innerText = "Â¥ " + finalMenu.price;
            catLabel.innerText = finalMenu.cat;
            
            // Cookieã«ä¿å­˜
            if (!collectedIds.includes(finalMenu.id)) {
                collectedIds.push(finalMenu.id);
                setCookie('saize_collection', collectedIds, 365);
            }
            
            spinBtn.disabled = false;
            spinBtn.innerText = "ã‚‚ã†ä¸€åº¦å›ã™ï¼";
            isSpinning = false;
        }

        function updateCollectionView() {
            collectionList.innerHTML = '';
            let count = 0;
            
            menuData.forEach(item => {
                const isCollected = collectedIds.includes(item.id);
                const itemEl = document.createElement('div');
                itemEl.className = `p-3 rounded-xl border flex justify-between items-center ${isCollected ? 'bg-white border-green-200' : 'bg-gray-200 border-gray-300 opacity-60'}`;
                
                if (isCollected) {
                    count++;
                    itemEl.innerHTML = `
                        <div>
                            <span class="text-xs text-green-600 font-bold">â„–${item.id}</span>
                            <div class="text-sm font-bold text-gray-800">${item.name}</div>
                        </div>
                        <div class="text-sm saize-red font-bold">Â¥${item.price}</div>
                    `;
                } else {
                    itemEl.innerHTML = `
                        <div>
                            <span class="text-xs text-gray-400 font-bold">â„–${item.id}</span>
                            <div class="text-sm font-bold text-gray-400">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</div>
                        </div>
                        <div class="text-sm text-gray-400 font-bold">Â¥ ---</div>
                    `;
                }
                collectionList.appendChild(itemEl);
            });

            const percent = Math.round((count / menuData.length) * 100);
            collectionCount.innerText = `é”æˆç‡: ${count} / ${menuData.length} (${percent}%)`;
            progressBar.style.width = `${percent}%`;
        }

        spinBtn.addEventListener('click', spin);

        openModalBtn.addEventListener('click', () => {
            updateCollectionView();
            modal.style.display = 'flex';
        });

        closeModalBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        window.onclick = (event) => {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        };
    </script>
</body>
</html>
