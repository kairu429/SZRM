<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚µã‚¤ã‚¼ãƒªãƒ¤ã‚¬ãƒãƒ£ 2024å®Œå…¨ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@700;800;900&display=swap');
        body { font-family: 'M PLUS Rounded 1c', sans-serif; background-color: #f3f7f4; color: #333; }
        .saize-card { border: 6px solid #009241; border-radius: 30px; background: white; box-shadow: 0 10px 25px rgba(0,0,0,0.1); position: relative; overflow: hidden; }
        .slot-window { height: 120px; display: flex; align-items: center; justify-content: center; background: #fff; border: 4px inset #f0f0f0; border-radius: 20px; overflow: hidden; }
        .spinning { animation: spin 0.1s linear infinite; }
        @keyframes spin { 0% { opacity: 0.5; transform: translateY(-10px); } 100% { opacity: 0.5; transform: translateY(10px); } }
        .btn-saize { background: linear-gradient(to bottom, #00b34d, #008037); box-shadow: 0 4px 0 #005a26; transition: 0.1s; cursor: pointer; }
        .btn-saize:active { transform: translateY(3px); box-shadow: 0 1px 0 #005a26; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 100; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .book-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .book-card { height: 140px; display: flex; flex-direction: column; justify-content: space-between; padding: 10px; border-radius: 18px; border-width: 2px; transition: 0.2s; background: white; }
        .text-fit { display: flex; align-items: center; justify-content: center; text-align: center; overflow: hidden; word-break: break-all; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div class="max-w-md w-full text-center pb-24">
        <header class="mb-6">
            <h1 class="text-3xl font-black text-red-600 italic">SAIZERIYA<span class="text-green-600 ml-1">GACHA</span></h1>
            <div id="king-rank-display" class="hidden mt-2 inline-flex items-center gap-2 bg-yellow-400 text-white px-5 py-1.5 rounded-full font-black text-sm shadow-md animate-bounce">
                <span>ğŸ† ã‚µã‚¤ã‚¼ãƒªãƒ¤ã®ç‹æ§˜</span>
            </div>
            <p id="sub-title" class="text-[10px] text-gray-400 font-bold uppercase tracking-widest mt-1">2024.06 Revised Edition</p>
        </header>

        <div class="saize-card p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <span id="cat-label" class="bg-green-100 text-green-700 text-[10px] px-3 py-1 rounded-full font-black uppercase">Start</span>
                <button id="age-btn" class="bg-gray-800 text-white text-[10px] px-3 py-1 rounded-full font-black">å¹´é½¢: <span id="age-val">--</span>æ­³</button>
            </div>
            <div class="slot-window mb-4">
                <div id="menu-name" class="text-xl font-black px-4 text-center leading-tight">ã‚µã‚¤ã‚¼ãƒªãƒ¤ã‚¬ãƒãƒ£ã‚’<br>å›ã—ã¦ã­ï¼</div>
            </div>
            <div class="flex justify-between items-end">
                <div class="text-left">
                    <div class="text-[9px] text-gray-400 font-bold uppercase tracking-widest">Menu No.</div>
                    <div id="menu-id" class="text-xl font-black text-green-600 tracking-tighter">----</div>
                </div>
                <div class="text-right">
                    <div class="text-[9px] text-gray-400 font-bold uppercase tracking-widest">Price</div>
                    <div id="menu-price" class="text-3xl font-black text-red-600">Â¥ ---</div>
                </div>
            </div>
        </div>

        <button id="spin-btn" class="btn-saize w-full py-5 rounded-2xl text-white text-2xl font-black mb-6 shadow-lg">ã‚¬ãƒãƒ£ã‚’æ³¨æ–‡ï¼</button>

        <div class="grid grid-cols-2 gap-3 text-[11px] font-black">
            <div class="bg-white p-3 rounded-xl border-2 border-green-100">ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ: <span id="comp-rate" class="text-green-600">0%</span></div>
            <div class="bg-white p-3 rounded-xl border-2 border-blue-100">ç´¯è¨ˆæ¥åº—: <span id="count-spin" class="text-blue-600">0</span>å›</div>
        </div>
    </div>

    <!-- Bottom Toolbar -->
    <div class="fixed bottom-6 w-full max-w-md px-6 flex justify-around items-center">
        <button id="open-book" class="w-14 h-14 bg-white border-4 border-green-600 rounded-2xl shadow-xl text-2xl flex items-center justify-center">ğŸ“–</button>
        <button id="open-admin" class="w-16 h-16 bg-yellow-400 border-4 border-white rounded-2xl shadow-xl text-3xl flex items-center justify-center">ğŸ‘‘</button>
        <button id="open-settings" class="w-14 h-14 bg-gray-700 text-white rounded-2xl shadow-xl text-xl flex items-center justify-center">âš™ï¸</button>
    </div>

    <!-- å›³é‘‘ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="modal-book" class="modal">
        <div class="bg-white w-[95%] max-w-md rounded-3xl h-[85vh] flex flex-col overflow-hidden shadow-2xl">
            <div class="bg-green-600 p-4 text-white font-black flex justify-between items-center shadow-lg">
                <div class="flex items-center gap-2">
                    <span>ğŸ“– 2024æ”¹å®šç‰ˆ å›³é‘‘</span>
                    <span id="book-count" class="text-xs bg-white/20 px-2 py-0.5 rounded-full">0/0</span>
                </div>
                <button class="close text-3xl">&times;</button>
            </div>
            <div id="book-content" class="flex-1 overflow-y-auto p-4 book-grid bg-gray-50">
                <!-- JSã§æç”» -->
            </div>
            <div class="p-4 bg-white border-t text-center text-[10px] font-bold text-gray-400">
                ã™ã¹ã¦ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆãƒ©ãƒ³ãƒå«ï¼‰ã‚’å½“ã¦ã‚‹ã¨ç‹æ§˜ã«ãªã‚Œã‚‹ã‚ˆï¼
            </div>
        </div>
    </div>

    <!-- å¹´é½¢/ãƒªã‚»ãƒƒãƒˆè¨­å®š -->
    <div id="modal-age" class="modal">
        <div class="bg-white p-8 rounded-[40px] w-80 text-center shadow-2xl">
            <h2 class="font-black mb-4 text-xl">è¨­å®š</h2>
            <p class="text-[10px] text-gray-400 mb-2 font-bold uppercase">Your Age</p>
            <input type="number" id="input-age" class="w-full text-center border-b-4 border-green-500 p-2 mb-8 text-4xl font-black outline-none" placeholder="20">
            <div class="space-y-3">
                <button id="save-age" class="w-full bg-green-600 text-white py-4 rounded-2xl font-black shadow-lg">ä¿å­˜ã™ã‚‹</button>
                <button id="reset-data" class="w-full text-red-400 py-2 text-xs font-bold underline">å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>
    </div>

    <!-- ç®¡ç†/é‡ã¿è¨­å®š -->
    <div id="modal-admin" class="modal">
        <div class="bg-white w-[95%] max-w-md rounded-3xl h-[80vh] flex flex-col overflow-hidden shadow-2xl">
            <div class="bg-yellow-500 p-4 text-white font-black flex justify-between items-center">
                <span>ğŸ‘‘ ç‹æ§˜ã®è¨­å®šãƒ«ãƒ¼ãƒ </span>
                <button class="close text-3xl">&times;</button>
            </div>
            <div class="flex-1 overflow-y-auto p-4 space-y-4">
                <p class="text-[10px] text-gray-500 font-bold">ç‰¹å®šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å‡ºç¾ç‡ï¼ˆé‡ã¿ï¼‰ã‚’å¤‰æ›´ã§ãã¾ã™</p>
                <div id="admin-menu-list" class="space-y-2"></div>
            </div>
        </div>
    </div>

    <script>
        // --- 2024.06 å®Œå…¨ç‰ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ ---
        const ALL_MENUS = [
            // ã‚µãƒ©ãƒ€
            { id: "1202", name: "å°ã‚¨ãƒ“ã®ã‚µãƒ©ãƒ€", price: 350, cat: "ã‚µãƒ©ãƒ€" },
            { id: "1205", name: "ã‚ã‹ã‚ã®ã‚µãƒ©ãƒ€", price: 350, cat: "ã‚µãƒ©ãƒ€" },
            { id: "1207", name: "ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ã®ã‚µãƒ©ãƒ€", price: 400, cat: "ã‚µãƒ©ãƒ€" },
            { id: "1208", name: "ã‚°ãƒªãƒ¼ãƒ³ã‚µãƒ©ãƒ€", price: 350, cat: "ã‚µãƒ©ãƒ€" },
            { id: "1209", name: "ãƒã‚­ãƒ³ã®ã‚µãƒ©ãƒ€", price: 350, cat: "ã‚µãƒ©ãƒ€" },
            // ã‚¹ãƒ¼ãƒ—
            { id: "1301", name: "ã‚³ãƒ¼ãƒ³ã‚¯ãƒªãƒ¼ãƒ ã‚¹ãƒ¼ãƒ—", price: 150, cat: "ã‚¹ãƒ¼ãƒ—" },
            { id: "1305", name: "ç”°èˆé¢¨ãƒŸãƒã‚¹ãƒˆãƒ­ãƒ¼ãƒ", price: 300, cat: "ã‚¹ãƒ¼ãƒ—" },
            { id: "1307", name: "ãŸã¾ã­ãã®ã‚ºãƒƒãƒ‘", price: 300, cat: "ã‚¹ãƒ¼ãƒ—" },
            // å‰èœ
            { id: "1401", name: "è¾›å‘³ãƒã‚­ãƒ³", price: 300, cat: "å‰èœ" },
            { id: "1402", name: "ã‚¢ãƒ­ã‚¹ãƒ†ã‚£ãƒãƒ¼ãƒ‹(2æœ¬)", price: 400, cat: "å‰èœ" },
            { id: "1403", name: "ã»ã†ã‚Œã‚“è‰ã®ã‚½ãƒ†ãƒ¼", price: 200, cat: "å‰èœ" },
            { id: "1404", name: "ãƒãƒƒãƒ—ã‚³ãƒ¼ãƒ³ã‚·ãƒ¥ãƒªãƒ³ãƒ—", price: 300, cat: "å‰èœ" },
            { id: "1405", name: "ã‚¨ã‚¹ã‚«ãƒ«ã‚´ã®ã‚ªãƒ¼ãƒ–ãƒ³ç„¼ã", price: 400, cat: "å‰èœ" },
            { id: "1406", name: "å°ã‚¨ãƒ“ã®ã‚«ã‚¯ãƒ†ãƒ«", price: 280, cat: "å‰èœ" },
            { id: "1407", name: "ãƒãƒ§ãƒªã‚½ãƒ¼", price: 400, cat: "å‰èœ" },
            { id: "1408", name: "è’¸ã—é¶ã®é¦™å‘³ã‚½ãƒ¼ã‚¹", price: 280, cat: "å‰èœ" },
            { id: "1410", name: "ãƒ ãƒ¼ãƒ«è²ã®ã‚¬ãƒ¼ãƒªãƒƒã‚¯ç„¼ã", price: 400, cat: "å‰èœ" },
            { id: "1411", name: "ã‚¢ã‚¹ãƒ‘ãƒ©ã‚¬ã‚¹ã®æ¸©ã‚µãƒ©ãƒ€", price: 300, cat: "å‰èœ" },
            { id: "1413", name: "çˆ½ã‚„ã‹ã«ã‚“ã˜ã‚“ã‚µãƒ©ãƒ€", price: 200, cat: "å‰èœ" },
            { id: "1414", name: "ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ãƒˆãƒãƒˆ", price: 430, cat: "å‰èœ" },
            { id: "1415", name: "ã‚«ãƒªãƒƒã¨ãƒãƒ†ãƒˆ", price: 250, cat: "å‰èœ" },
            { id: "1417", name: "ãƒãƒƒãƒ•ã‚¡ãƒ­ãƒ¼ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ã®ã‚«ãƒ—ãƒ¬ãƒ¼ã‚¼", price: 430, cat: "å‰èœ" },
            { id: "1422", name: "ãƒãƒ¢ãƒ³ãƒ»ã‚»ãƒ©ãƒ¼ãƒ", price: 320, cat: "å‰èœ" },
            { id: "1423", name: "ç”Ÿãƒãƒ ã¨ãƒãƒƒãƒ•ã‚¡ãƒ­ãƒ¼ãƒ¢ãƒƒãƒ„ã‚¡ãƒ¬ãƒ©ã®ç››åˆã›", price: 500, cat: "å‰èœ" },
            { id: "1425", name: "æŸ”ã‚‰ã‹é’è±†ã®æ¸©ã‚µãƒ©ãƒ€", price: 200, cat: "å‰èœ" },
            { id: "1452", name: "ã‚¢ãƒ­ã‚¹ãƒ†ã‚£ãƒãƒ¼ãƒ‹Wã‚µã‚¤ã‚º(4æœ¬)", price: 800, cat: "å‰èœ" },
            // ãƒ‰ãƒªã‚¢ãƒ»ã‚°ãƒ©ã‚¿ãƒ³
            { id: "2101", name: "ãƒŸãƒ©ãƒé¢¨ãƒ‰ãƒªã‚¢", price: 300, cat: "ãƒ‰ãƒªã‚¢" },
            { id: "2103", name: "åŠç†Ÿåµã®ãƒŸãƒ©ãƒé¢¨ãƒ‰ãƒªã‚¢", price: 350, cat: "ãƒ‰ãƒªã‚¢" },
            { id: "2106", name: "ã‚¿ãƒ©ã‚³ã¨ã‚¨ãƒ“ã®ãƒ‰ãƒªã‚¢", price: 400, cat: "ãƒ‰ãƒªã‚¢" },
            { id: "2108", name: "ç„¼ãƒãƒ¼ã‚ºãƒŸãƒ©ãƒé¢¨ãƒ‰ãƒªã‚¢", price: 350, cat: "ãƒ‰ãƒªã‚¢" },
            { id: "2109", name: "ã‚¨ãƒ“ã¨ã‚¿ãƒ©ã‚³ã®ã‚¯ãƒªãƒ¼ãƒ ã‚°ãƒ©ã‚¿ãƒ³", price: 430, cat: "ãƒ‰ãƒªã‚¢" },
            // ãƒ”ã‚¶
            { id: "2203", name: "ãƒãƒ«ã‚²ãƒªãƒ¼ã‚¿ãƒ”ã‚¶", price: 400, cat: "ãƒ”ã‚¶" },
            { id: "2204", name: "é‡èœã¨ãã®ã“ã®ãƒ”ã‚¶", price: 400, cat: "ãƒ”ã‚¶" },
            { id: "2206", name: "ãŸã£ã·ã‚Šã‚³ãƒ¼ãƒ³ã®ãƒ”ã‚¶", price: 400, cat: "ãƒ”ã‚¶" },
            { id: "2208", name: "ã‚½ãƒ¼ã‚»ãƒ¼ã‚¸ãƒ”ã‚¶", price: 400, cat: "ãƒ”ã‚¶" },
            // ãƒ‘ã‚¹ã‚¿
            { id: "2301", name: "ã‚¿ãƒ©ã‚³ã‚½ãƒ¼ã‚¹ã‚·ã‚·ãƒªãƒ¼é¢¨", price: 400, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2303", name: "ãƒšãƒšãƒ­ãƒ³ãƒãƒ¼ãƒ", price: 300, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2304", name: "ãƒ‘ãƒ«ãƒé¢¨ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£", price: 400, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2305", name: "ã‚«ãƒ«ãƒœãƒŠãƒ¼ãƒ©", price: 500, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2306", name: "ãƒŸãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ãƒœãƒ­ãƒ‹ã‚¢é¢¨", price: 400, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2310", name: "ã‚¹ãƒ¼ãƒ—å…¥ã‚Šå¡©å‘³ãƒœãƒ³ã‚´ãƒ¬", price: 500, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2316", name: "åŠç†Ÿåµã®ãƒŸãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ãƒœãƒ­ãƒ‹ã‚¢é¢¨", price: 450, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2317", name: "åŠç†Ÿåµã®ãƒšãƒšãƒ­ãƒ³ãƒãƒ¼ãƒ", price: 350, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2320", name: "å°ã‚¨ãƒ“ã®ã‚¿ãƒ©ã‚³ã‚½ãƒ¼ã‚¹", price: 540, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2321", name: "ãã®ã“ã¨ã»ã†ã‚Œã‚“è‰ã®ã‚¯ãƒªãƒ¼ãƒ ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£", price: 600, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2325", name: "ãƒšãƒ³ãƒã‚¢ãƒ©ãƒ“ã‚¢ãƒ¼ã‚¿", price: 400, cat: "ãƒ‘ã‚¹ã‚¿" },
            { id: "2328", name: "ã‚¤ã‚«ã®å¢¨å…¥ã‚Šã‚»ãƒ”ã‚¢ã‚½ãƒ¼ã‚¹", price: 500, cat: "ãƒ‘ã‚¹ã‚¿" },
            // è‚‰
            { id: "2402", name: "è‹¥é¶ã®ãƒ‡ã‚£ã‚¢ãƒœãƒ©é¢¨", price: 500, cat: "è‚‰" },
            { id: "2403", name: "ã‚¤ã‚¿ãƒªã‚¢ãƒ³ãƒãƒ³ãƒãƒ¼ã‚°", price: 500, cat: "è‚‰" },
            { id: "2404", name: "æŸ”ã‚‰ã‹ãƒã‚­ãƒ³ã®ãƒãƒ¼ã‚ºç„¼ã", price: 500, cat: "è‚‰" },
            { id: "2406", name: "ãƒãƒ³ãƒãƒ¼ã‚°ã‚¹ãƒ†ãƒ¼ã‚­", price: 400, cat: "è‚‰" },
            { id: "2407", name: "ãƒ‡ã‚£ã‚¢ãƒœãƒ©é¢¨ãƒãƒ³ãƒãƒ¼ã‚°", price: 500, cat: "è‚‰" },
            { id: "2413", name: "ãƒ©ãƒ ã¨é‡èœã®ã‚°ãƒªãƒ«", price: 870, cat: "è‚‰" },
            { id: "2418", name: "ãƒŸãƒƒã‚¯ã‚¹ã‚°ãƒªãƒ«", price: 650, cat: "è‚‰" },
            // ãƒ‡ã‚¶ãƒ¼ãƒˆ
            { id: "3201", name: "ãƒ†ã‚£ãƒ©ãƒŸã‚¹ã‚¯ãƒ©ã‚·ã‚³", price: 300, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3204", name: "ã‚¸ã‚§ãƒ©ãƒ¼ãƒˆï¼†ã‚·ãƒŠãƒ¢ãƒ³ãƒ—ãƒãƒ•ã‚©ãƒƒã‚«", price: 450, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3205", name: "ã‚¤ã‚¿ãƒªã‚¢ãƒ³ã‚¸ã‚§ãƒ©ãƒ¼ãƒˆ", price: 250, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3206", name: "ã‚¤ã‚¿ãƒªã‚¢ãƒ³ãƒ—ãƒªãƒ³", price: 250, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3207", name: "ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚±ãƒ¼ã‚­", price: 300, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3212", name: "ãƒ—ãƒªãƒ³ã¨ãƒ†ã‚£ãƒ©ãƒŸã‚¹ã‚¯ãƒ©ã‚·ã‚³ã®ç››åˆã›", price: 500, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3213", name: "ãƒˆãƒªãƒ•ã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ", price: 350, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            { id: "3215", name: "ã‚³ãƒ¼ãƒ’ãƒ¼ã‚¼ãƒªãƒ¼ï¼†ã‚¤ã‚¿ãƒªã‚¢ãƒ³ã‚¸ã‚§ãƒ©ãƒ¼ãƒˆ", price: 350, cat: "ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
            // ãƒ‘ãƒ³ãƒ»ãƒ©ã‚¤ã‚¹
            { id: "3101", name: "ãƒ©ã‚¤ã‚¹", price: 150, cat: "ãƒ©ã‚¤ã‚¹" },
            { id: "3102", name: "ãƒ©ãƒ¼ã‚¸ãƒ©ã‚¤ã‚¹", price: 200, cat: "ãƒ©ã‚¤ã‚¹" },
            { id: "3103", name: "ã‚¹ãƒ¢ãƒ¼ãƒ«ãƒ©ã‚¤ã‚¹", price: 100, cat: "ãƒ©ã‚¤ã‚¹" },
            { id: "3104", name: "ã‚·ãƒŠãƒ¢ãƒ³ãƒ—ãƒãƒ•ã‚©ãƒƒã‚«", price: 200, cat: "ãƒ‘ãƒ³" },
            { id: "3106", name: "ãƒ—ãƒãƒ•ã‚©ãƒƒã‚«", price: 150, cat: "ãƒ‘ãƒ³" },
            { id: "3108", name: "ãƒŸãƒ‹ãƒ•ã‚£ã‚»ãƒ«", price: 150, cat: "ãƒ‘ãƒ³" },
            { id: "3109", name: "ã‚¬ãƒ¼ãƒªãƒƒã‚¯ãƒˆãƒ¼ã‚¹ãƒˆ", price: 200, cat: "ãƒ‘ãƒ³" },
            { id: "3110", name: "ãƒ•ã‚©ãƒƒã‚«ãƒã‚ª", price: 150, cat: "ãƒ‘ãƒ³" },
            { id: "3111", name: "ã‚¬ãƒ¼ãƒªãƒƒã‚¯ãƒ•ã‚©ãƒƒã‚«ãƒã‚ª", price: 200, cat: "ãƒ‘ãƒ³" },
            // ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ãƒ»ãƒ‰ãƒªãƒ³ã‚¯
            { id: "3301", name: "ç”Ÿãƒ“ãƒ¼ãƒ« ã‚¸ãƒ§ãƒƒã‚­", price: 400, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3302", name: "ç”Ÿãƒ“ãƒ¼ãƒ« ã‚°ãƒ©ã‚¹", price: 300, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3303", name: "ã‚¢ã‚µãƒ’ãƒ‰ãƒ©ã‚¤ã‚¼ãƒ­", price: 250, cat: "ãƒ‰ãƒªãƒ³ã‚¯" },
            { id: "3304", name: "ã‚­ãƒªãƒ³æ°·çµãƒ¬ãƒ¢ãƒ³", price: 350, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3306", name: "ã‚°ãƒ©ãƒƒãƒ‘(30ml)", price: 300, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3401", name: "ã‚°ãƒ©ã‚¹ãƒ¯ã‚¤ãƒ³èµ¤", price: 100, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3402", name: "ã‚°ãƒ©ã‚¹ãƒ¯ã‚¤ãƒ³ç™½", price: 100, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3403", name: "ãƒ‡ã‚«ãƒ³ã‚¿(250ml)èµ¤", price: 200, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3404", name: "ãƒ‡ã‚«ãƒ³ã‚¿(250ml)ç™½", price: 200, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3407", name: "ãƒã‚°ãƒŠãƒ (1500ml)èµ¤", price: 1100, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "3412", name: "ãƒ©ãƒ³ãƒ–ãƒ«ã‚¹ã‚³(ãƒ­ã‚¼)", price: 1100, cat: "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«" },
            { id: "5101", name: "ã‚»ãƒƒãƒˆãƒ‰ãƒªãƒ³ã‚¯ãƒãƒ¼", price: 200, cat: "ãƒ‰ãƒªãƒ³ã‚¯" },
            // ãŠã“ã•ã¾ãƒ»ãƒˆãƒƒãƒ”ãƒ³ã‚°
            { id: "4105", name: "ãŠã“ã•ã¾ãƒãƒƒãƒ—ã‚³ãƒ¼ãƒ³ã‚·ãƒ¥ãƒªãƒ³ãƒ—", price: 150, cat: "ãŠã“ã•ã¾" },
            { id: "4106", name: "ãŠã“ã•ã¾ãƒãƒ†ãƒˆ", price: 100, cat: "ãŠã“ã•ã¾" },
            { id: "4301", name: "ãƒˆãƒƒãƒ”ãƒ³ã‚°åŠç†Ÿåµ", price: 50, cat: "ãƒˆãƒƒãƒ”ãƒ³ã‚°" },
            { id: "4304", name: "é‡èœãƒšãƒ¼ã‚¹ãƒˆ", price: 100, cat: "ãƒˆãƒƒãƒ”ãƒ³ã‚°" },
            { id: "4307", name: "ãƒˆãƒƒãƒ”ãƒ³ã‚°ç²‰ãƒãƒ¼ã‚º", price: 100, cat: "ãƒˆãƒƒãƒ”ãƒ³ã‚°" },
            // ãƒ©ãƒ³ãƒ
            { id: "1116", name: "ãƒ‘ãƒ«ãƒé¢¨ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£(ãƒ©ãƒ³ãƒ)", price: 500, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1120", name: "ãƒŸãƒ¼ãƒˆã‚½ãƒ¼ã‚¹ãƒœãƒ­ãƒ‹ã‚¢é¢¨(ãƒ©ãƒ³ãƒ)", price: 500, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1121", name: "ã»ã†ã‚Œã‚“è‰ã¨ãƒ‘ãƒ³ãƒã‚§ãƒƒã‚¿ã®ã‚¹ãƒ‘ã‚²ãƒƒãƒ†ã‚£", price: 500, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1135", name: "ã‚¿ãƒ©ã‚³ã‚½ãƒ¼ã‚¹ã‚·ã‚·ãƒªãƒ¼é¢¨(ãƒ©ãƒ³ãƒ)", price: 500, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1140", name: "ãƒ‡ã‚£ã‚¢ãƒœãƒ©é¢¨ãƒãƒ³ãƒãƒ¼ã‚°(ãƒ©ãƒ³ãƒ)", price: 700, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1160", name: "ã‚¿ãƒ©ã‚³ã¨ã‚¨ãƒ“ã®ãƒ‰ãƒªã‚¢(ãƒ©ãƒ³ãƒ)", price: 500, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1170", name: "ã‚ªãƒ‹ã‚ªãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒãƒ³ãƒãƒ¼ã‚°(ãƒ©ãƒ³ãƒ)", price: 600, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1170b", name: "ç‰›100%ã‚ªãƒ‹ã‚ªãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒãƒ³ãƒãƒ¼ã‚°", price: 650, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1190", name: "ç‰¹è£½ãƒ‡ãƒŸã‚½ãƒ¼ã‚¹ãƒãƒ³ãƒãƒ¼ã‚°(ãƒ©ãƒ³ãƒ)", price: 600, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "1190b", name: "ç‰›100%ãƒ‡ãƒŸã‚°ãƒ©ã‚¹ã‚½ãƒ¼ã‚¹ã®ãƒãƒ³ãƒãƒ¼ã‚°", price: 650, cat: "ãƒ©ãƒ³ãƒ" },
            { id: "5104", name: "ãƒ©ãƒ³ãƒãƒ‰ãƒªãƒ³ã‚¯ãƒãƒ¼", price: 100, cat: "ãƒ©ãƒ³ãƒ" }
        ];

        // --- çŠ¶æ…‹ç®¡ç† ---
        let menus = JSON.parse(localStorage.getItem('sz_menus_2024')) || ALL_MENUS.map(m => ({ ...m, weight: 10 }));
        let stats = {
            age: parseInt(localStorage.getItem('sz_age_2024')) || null,
            spins: parseInt(localStorage.getItem('sz_spins_2024')) || 0,
            collected: JSON.parse(localStorage.getItem('sz_collected_2024') || '[]'),
            isKing: JSON.parse(localStorage.getItem('sz_king_2024') || 'false')
        };

        const save = () => {
            localStorage.setItem('sz_menus_2024', JSON.stringify(menus));
            localStorage.setItem('sz_age_2024', stats.age);
            localStorage.setItem('sz_spins_2024', stats.spins);
            localStorage.setItem('sz_collected_2024', JSON.stringify(stats.collected));
            localStorage.setItem('sz_king_2024', stats.isKing);
            updateUI();
        };

        const updateUI = () => {
            document.getElementById('age-val').innerText = stats.age || "--";
            document.getElementById('count-spin').innerText = stats.spins;
            const rate = Math.floor((stats.collected.length / menus.length) * 100);
            document.getElementById('comp-rate').innerText = `${rate}%`;
            
            if (rate >= 100 && !stats.isKing) {
                stats.isKing = true;
                save();
            }

            if (stats.isKing) {
                document.getElementById('king-rank-display').classList.remove('hidden');
                document.getElementById('sub-title').innerText = "ğŸ‘‘ King of Saizeriya ğŸ‘‘";
            }
        };

        const updateBook = () => {
            const content = document.getElementById('book-content');
            document.getElementById('book-count').innerText = `${stats.collected.length}/${menus.length}`;
            content.innerHTML = menus.map(m => {
                const isFound = stats.collected.includes(m.id);
                const nameText = isFound ? m.name : 'ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ';
                // æ–‡å­—æ•°ã«å¿œã˜ãŸãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´
                const fontSize = nameText.length > 15 ? 'text-[8px]' : (nameText.length > 10 ? 'text-[9px]' : 'text-[11px]');
                
                return `
                    <div class="book-card border-2 ${isFound ? 'border-green-200 shadow-sm' : 'border-gray-100 opacity-60'}">
                        <div>
                            <div class="text-[6px] text-gray-400 font-bold uppercase mb-1">${m.cat}</div>
                            <div class="text-fit ${fontSize} font-black leading-tight h-14">
                                ${nameText}
                            </div>
                        </div>
                        <div class="pt-2 border-t border-gray-50 flex justify-between items-end">
                            <span class="text-[7px] text-gray-300 font-bold">#${m.id}</span>
                            <span class="text-[10px] font-black text-red-500">${isFound ? 'Â¥' + m.price : 'Â¥ ???'}</span>
                        </div>
                    </div>
                `;
            }).join('');
        };

        const updateAdminList = () => {
            const list = document.getElementById('admin-menu-list');
            list.innerHTML = menus.map((m, index) => `
                <div class="bg-gray-50 p-3 rounded-xl flex items-center justify-between border text-[10px]">
                    <div class="flex-1">
                        <div class="font-black text-gray-700">${m.name}</div>
                        <div class="text-gray-400">No.${m.id} / ${m.cat}</div>
                    </div>
                    <div class="flex items-center gap-2 bg-white p-1.5 rounded-lg border">
                        <span class="text-[8px] font-bold text-gray-400">é‡ã¿</span>
                        <input type="number" value="${m.weight}" onchange="updateWeight(${index}, this.value)" class="w-10 text-center font-black outline-none">
                    </div>
                </div>
            `).join('');
        };

        window.updateWeight = (i, v) => { menus[i].weight = parseInt(v) || 0; save(); };

        const spin = () => {
            const btn = document.getElementById('spin-btn');
            const nameEl = document.getElementById('menu-name');
            const idEl = document.getElementById('menu-id');
            const priceEl = document.getElementById('menu-price');
            const catEl = document.getElementById('cat-label');
            
            if (btn.disabled) return;

            const activeMenus = (stats.age && stats.age < 20) ? menus.filter(m => m.cat !== "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«") : menus;
            let pool = [];
            activeMenus.forEach(m => { for(let i=0; i < (m.weight || 0); i++) pool.push(m); });

            if (pool.length === 0) return alert("ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“ã€‚è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");

            btn.disabled = true;
            nameEl.classList.add('spinning');
            idEl.innerText = "----";
            priceEl.innerText = "Â¥ ---";

            let count = 0;
            const timer = setInterval(() => {
                const randomM = activeMenus[Math.floor(Math.random() * activeMenus.length)];
                nameEl.innerText = randomM.name;
                nameEl.style.fontSize = randomM.name.length > 10 ? '1rem' : '1.25rem';
                
                if (++count > 25) {
                    clearInterval(timer);
                    nameEl.classList.remove('spinning');
                    const res = pool[Math.floor(Math.random() * pool.length)];
                    
                    nameEl.innerText = res.name;
                    idEl.innerText = res.id;
                    priceEl.innerText = `Â¥ ${res.price}`;
                    catEl.innerText = res.cat;
                    
                    stats.spins++;
                    if (!stats.collected.includes(res.id)) {
                        stats.collected.push(res.id);
                    }
                    save();
                    btn.disabled = false;
                }
            }, 50);
        };

        // --- äº‹ä»¶ç™»éŒ² ---
        document.getElementById('spin-btn').onclick = spin;
        document.getElementById('open-book').onclick = () => { updateBook(); document.getElementById('modal-book').style.display = 'flex'; };
        document.getElementById('open-admin').onclick = () => { updateAdminList(); document.getElementById('modal-admin').style.display = 'flex'; };
        document.getElementById('open-settings').onclick = () => {
            document.getElementById('input-age').value = stats.age;
            document.getElementById('modal-age').style.display = 'flex';
        };

        document.getElementById('save-age').onclick = () => {
            stats.age = parseInt(document.getElementById('input-age').value) || 20;
            save();
            document.getElementById('modal-age').style.display = 'none';
        };

        document.getElementById('reset-data').onclick = () => {
            if(confirm('ã‚³ãƒ³ãƒ—çŠ¶æ³ã‚„è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.clear();
                location.reload();
            }
        };

        document.querySelectorAll('.close').forEach(b => b.onclick = () => b.closest('.modal').style.display = 'none');
        window.onclick = (e) => { if(e.target.classList.contains('modal')) e.target.style.display = 'none'; };

        updateUI();
    </script>
</body>
</html>
